#!/bin/bash
# macOS Platform Configuration

# System settings
PLATFORM="macos"
OS_TYPE="darwin"
PACKAGE_MANAGER="brew"

# Service management
SERVICE_MANAGER="launchctl"
SERVICE_DIR="/Library/LaunchDaemons"
SERVICE_EXTENSION=".plist"

# Application paths
APP_ROOT="/usr/local/var/www"
APP_USER="$(whoami)"
APP_GROUP="staff"
LOG_DIR="/usr/local/var/log"
PID_DIR="/usr/local/var/run"

# Python configuration
PYTHON_BIN="/usr/local/bin/python3"
PIP_BIN="/usr/local/bin/pip3"
VIRTUALENV_DIR="/usr/local/opt/venvs"

# Node.js configuration
NODE_BIN="/usr/local/bin/node"
NPM_BIN="/usr/local/bin/npm"
NODE_ENV="production"

# Nginx configuration (if using Homebrew nginx)
NGINX_AVAILABLE="/usr/local/etc/nginx/sites-available"
NGINX_ENABLED="/usr/local/etc/nginx/sites-enabled"
NGINX_CONF="/usr/local/etc/nginx/nginx.conf"
NGINX_USER="$(whoami)"

# Database configuration
DB_HOST="localhost"
DB_PORT="5432"
DB_BACKUP_DIR="/usr/local/var/backups/postgres"

# Redis configuration
REDIS_HOST="localhost"
REDIS_PORT="6379"

# Monitoring
METRICS_PORT="9090"
HEALTH_CHECK_INTERVAL="30"

# Deployment settings
DEPLOY_USER="$(whoami)"
DEPLOY_GROUP="staff"
DEPLOY_TIMEOUT="600"
MAX_DEPLOY_RETRIES="3"

# Backup settings
BACKUP_RETENTION_DAYS="30"
BACKUP_COMPRESSION="gzip"

# Security
FIREWALL_ENABLED="true"
SSL_CERT_DIR="/usr/local/etc/ssl/certs"
SSL_KEY_DIR="/usr/local/etc/ssl/private"

# Resource limits
MAX_MEMORY="2G"
MAX_CPU_PERCENT="80"
MAX_OPEN_FILES="65536"

# Logging
LOG_ROTATION="daily"
LOG_RETENTION="14"
LOG_COMPRESSION="true"

# macOS specific
USE_HOMEBREW="true"
XCODE_REQUIRED="false"