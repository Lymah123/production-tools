#!/bin/bash
# Windows (WSL/WSL2) Platform Configuration

# System settings
PLATFORM="windows"
OS_TYPE="windows"
PACKAGE_MANAGER="choco"  # Chocolatey

# Service management (via NSSM or Task Scheduler)
SERVICE_MANAGER="nssm"
SERVICE_DIR="C:/ProgramData/myapp/services"
SERVICE_EXTENSION=".bat"

# Application paths
APP_ROOT="/mnt/c/www"
APP_USER="$USERNAME"
APP_GROUP="Users"
LOG_DIR="/mnt/c/www/logs"
PID_DIR="/mnt/c/www/run"

# Python configuration
PYTHON_BIN="/usr/bin/python3"
PIP_BIN="/usr/bin/pip3"
VIRTUALENV_DIR="/mnt/c/venvs"

# Node.js configuration
NODE_BIN="/usr/bin/node"
NPM_BIN="/usr/bin/npm"
NODE_ENV="production"

# Nginx configuration (if using WSL nginx)
NGINX_AVAILABLE="/etc/nginx/sites-available"
NGINX_ENABLED="/etc/nginx/sites-enabled"
NGINX_CONF="/etc/nginx/nginx.conf"
NGINX_USER="$USERNAME"

# Database configuration
DB_HOST="localhost"
DB_PORT="5432"
DB_BACKUP_DIR="/mnt/c/backups/postgres"

# Redis configuration
REDIS_HOST="localhost"
REDIS_PORT="6379"

# Monitoring
METRICS_PORT="9090"
HEALTH_CHECK_INTERVAL="30"

# Deployment settings
DEPLOY_USER="$USERNAME"
DEPLOY_GROUP="Users"
DEPLOY_TIMEOUT="600"
MAX_DEPLOY_RETRIES="3"

# Backup settings
BACKUP_RETENTION_DAYS="30"
BACKUP_COMPRESSION="zip"

# Security
FIREWALL_ENABLED="true"
SSL_CERT_DIR="/mnt/c/ssl/certs"
SSL_KEY_DIR="/mnt/c/ssl/private"

# Resource limits
MAX_MEMORY="2G"
MAX_CPU_PERCENT="80"
MAX_OPEN_FILES="65536"

# Logging
LOG_ROTATION="daily"
LOG_RETENTION="14"
LOG_COMPRESSION="true"

# Windows/WSL specific
USE_WSL="true"
USE_CHOCO="true"
USE_NSSM="true"